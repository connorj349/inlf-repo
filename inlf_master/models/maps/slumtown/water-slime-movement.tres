[gd_resource type="ShaderMaterial" load_steps=2 format=2]

[sub_resource type="Shader" id=1]
code = "shader_type spatial;
render_mode unshaded;

uniform float PI = 3.14159265;
uniform float TAU = 6.28318530718;
uniform float NUM_WAVES = 1.0;
uniform float DISTORTION_PERC = 0.10;

void fragment() {
	vec2 SCREEN_PIXEL_SIZE = 1.0 / VIEWPORT_SIZE;
	vec2 uv = FRAGCOORD.xy/SCREEN_PIXEL_SIZE.xy;
	uv.x += sin(uv.y * TAU * NUM_WAVES + TIME) * DISTORTION_PERC;
	uv.y += sin(uv.x * TAU * NUM_WAVES + TIME) * DISTORTION_PERC;
	vec3 textureCol = texture(SCREEN_TEXTURE, uv).xyz;
	ALBEDO = texture(SCREEN_TEXTURE, uv).rgb;
	//ALBEDO = textureCol;
}"

[resource]
shader = SubResource( 1 )
shader_param/PI = 3.14159
shader_param/TAU = 6.28319
shader_param/NUM_WAVES = 1.0
shader_param/DISTORTION_PERC = 0.1
